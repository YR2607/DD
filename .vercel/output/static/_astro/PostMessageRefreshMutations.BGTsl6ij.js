import{a0 as x,G as M}from"./index.GAdVpEDN.js";import{c as E}from"./compiler-runtime.BVN8GnAY.js";import{r as d}from"./index.DB4Po_jQ.js";import{B as R,aN as g}from"./studio-component.CBxzOH7u.js";import"./client.C73kiKoU.js";function w(u){const e=E.c(9),{comlink:r,type:s,previewKitConnection:n,loadersConnection:o}=u;let t;e[0]!==u.id?(t=x(u.id),e[0]=u.id,e[1]=t):t=e[1];const i=t,{selectedReleaseId:_}=R(),{draft:a,published:l,ready:m,version:f}=g(i,s,"low",_),c=n==="connected"||o==="connected";if(m&&a||l){let v;return e[2]!==r||e[3]!==a||e[4]!==i||e[5]!==c||e[6]!==l||e[7]!==f?(v=M.jsx(S,{comlink:r,draft:a,livePreviewEnabled:c,published:l,version:f},i),e[2]=r,e[3]=a,e[4]=i,e[5]=c,e[6]=l,e[7]=f,e[8]=v):v=e[8],v}return null}function S(u){const e=E.c(18),{comlink:r,draft:s,published:n,livePreviewEnabled:o,version:t}=u,[i,_]=d.useState(s),[a,l]=d.useState(n),[m,f]=d.useState(t);let c;e[0]!==r||e[1]!==s||e[2]!==o||e[3]!==i?._rev||e[4]!==a?._rev||e[5]!==m?._rev||e[6]!==n||e[7]!==t?(c=()=>{m?._rev!==t?._rev&&(d.startTransition(()=>f(t)),t&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(t)})),i?._rev!==s?._rev&&(d.startTransition(()=>_(s)),s&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(s)})),a?._rev!==n?._rev&&(d.startTransition(()=>l(n)),n&&r?.post("presentation/refresh",{source:"mutation",livePreviewEnabled:o,document:b(n)}))},e[0]=r,e[1]=s,e[2]=o,e[3]=i?._rev,e[4]=a?._rev,e[5]=m?._rev,e[6]=n,e[7]=t,e[8]=c):c=e[8];const v=i?._rev,P=a?._rev,h=m?._rev;let p;return e[9]!==r||e[10]!==s||e[11]!==o||e[12]!==n||e[13]!==v||e[14]!==P||e[15]!==h||e[16]!==t?(p=[r,s,o,v,P,n,h,t],e[9]=r,e[10]=s,e[11]=o,e[12]=n,e[13]=v,e[14]=P,e[15]=h,e[16]=t,e[17]=p):p=e[17],d.useEffect(c,p),null}function b(u){const{_id:e,_type:r,_rev:s,slug:n}=u;return{_id:e,_type:r,_rev:s,slug:n}}var k=d.memo(w);export{k as default};
